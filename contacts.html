<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‰¯ç‹åº„ä¹¡æœºå…³å¹²éƒ¨é€šè®¯å½•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: #f0f2f5;
            color: #333;
        }
        
        /* ç™»å½•ç•Œé¢æ ·å¼ */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .login-card {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            text-align: center;
            width: 100%;
            max-width: 400px;
            margin: 20px;
        }
        
        .login-title {
            font-size: 2em;
            color: #333;
            margin-bottom: 10px;
        }
        
        .login-subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 0.95em;
        }
        
        .password-input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 20px;
            transition: border-color 0.3s;
        }
        
        .password-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
        }
        
        .error-msg {
            color: #d32f2f;
            margin-top: 15px;
            font-size: 0.9em;
            display: none;
        }
        
        /* ä¸»è¦å†…å®¹æ ·å¼ */
        .main-content {
            display: none;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .logout-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }
        
        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* æ–°å¢æŒ‰é’®æ ·å¼ */
        .add-contact-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background: rgba(76, 175, 80, 0.9);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }
        
        .add-contact-btn:hover {
            background: rgba(76, 175, 80, 1);
        }

        .data-manage-btn {
            position: absolute;
            top: 20px;
            left: 160px;
            padding: 10px 20px;
            background: rgba(255, 193, 7, 0.9);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }
        
        .data-manage-btn:hover {
            background: rgba(255, 193, 7, 1);
        }
        
        .emergency-section {
            background: #fff;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .emergency-section h3 {
            color: #d32f2f;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .emergency-contacts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .emergency-card {
            background: #ffebee;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #d32f2f;
        }
        
        .emergency-card .title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .emergency-card .phone {
            color: #d32f2f;
            font-size: 1.2em;
        }
        
        .search-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .search-controls {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        input[type="text"], select {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        input[type="text"]:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .stats {
            display: flex;
            gap: 20px;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .stat-item .label {
            color: #666;
        }
        
        .stat-item .value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }
        
        .contacts-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            max-height: 600px;
            overflow-y: auto;
            padding: 10px;
        }
        
        .contact-card {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
            position: relative;
        }
        
        .contact-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }
        
        .contact-card .name {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .contact-card .department {
            color: #667eea;
            font-size: 0.95em;
            margin-bottom: 12px;
        }
        
        .contact-card .info-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            color: #555;
            font-size: 0.95em;
        }
        
        .contact-card .info-item .icon {
            margin-right: 8px;
            width: 16px;
        }

        /* æ“ä½œæŒ‰é’®æ ·å¼ */
        .contact-actions {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 5px;
        }

        .btn-edit, .btn-delete {
            padding: 5px 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .btn-edit {
            background: #4CAF50;
            color: white;
        }

        .btn-edit:hover {
            background: #45a049;
        }

        .btn-delete {
            background: #f44336;
            color: white;
        }

        .btn-delete:hover {
            background: #da190b;
        }
        
        .no-results {
            text-align: center;
            padding: 60px;
            color: #999;
            font-size: 1.1em;
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 15px;
        }

        .modal-title {
            font-size: 1.5em;
            color: #333;
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #999;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            color: #333;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        .btn-primary, .btn-secondary {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #666;
            border: 1px solid #ddd;
        }

        .btn-secondary:hover {
            background: #e9e9e9;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        /* æˆåŠŸæ¶ˆæ¯æ ·å¼ */
        .success-message {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            padding: 12px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .logout-btn, .add-contact-btn, .data-manage-btn {
                position: static;
                margin: 10px 5px;
                width: calc(33.33% - 10px);
                left: auto;
            }
            
            .search-controls {
                grid-template-columns: 1fr;
            }
            
            .contact-grid {
                grid-template-columns: 1fr;
            }
            
            .stats {
                flex-direction: column;
                gap: 10px;
            }

            .modal-content {
                margin: 10% auto;
                width: 95%;
                padding: 20px;
            }

            .modal-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- ç™»å½•ç•Œé¢ -->
    <div id="loginContainer" class="login-container">
        <div class="login-card">
            <h2 class="login-title">ğŸ” ç³»ç»ŸéªŒè¯</h2>
            <p class="login-subtitle">è‰¯ç‹åº„ä¹¡æœºå…³å¹²éƒ¨é€šè®¯å½•<br>è¯·è¾“å…¥è®¿é—®å¯†ç </p>
            <input type="password" id="passwordInput" class="password-input" placeholder="è¯·è¾“å…¥å¯†ç " maxlength="10">
            <button onclick="checkPassword()" class="login-btn">éªŒè¯ç™»å½•</button>
            <div id="errorMsg" class="error-msg">âŒ å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥</div>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹ -->
    <div id="mainContent" class="main-content">
        <div class="container">
            <div class="header">
                <button onclick="showAddModal()" class="add-contact-btn">+ æ–°å¢è”ç³»äºº</button>
                <button onclick="showDataManagement()" class="data-manage-btn">ğŸ“Š æ•°æ®ç®¡ç†</button>
                <button onclick="logout()" class="logout-btn">é€€å‡ºç™»å½•</button>
                <h1>è‰¯ç‹åº„ä¹¡æœºå…³å¹²éƒ¨é€šè®¯å½•</h1>
                <p>å†…éƒ¨ä½¿ç”¨ Â· è¯·å¦¥å–„ä¿ç®¡</p>
            </div>
            
            <div id="successMessage" class="success-message"></div>
            
            <div class="emergency-section">
                <h3>ğŸš¨ ç´§æ€¥è”ç³»ç”µè¯</h3>
                <div class="emergency-contacts">
                    <div class="emergency-card">
                        <div class="title">åŒºæ”¿åºœåŠ</div>
                        <div class="phone">ğŸ“ 63032789</div>
                    </div>
                    <div class="emergency-card">
                        <div class="title">åŒºå§”åŠå…¬å®¤</div>
                        <div class="phone">ğŸ“ 63032888</div>
                    </div>
                    <div class="emergency-card">
                        <div class="title">åŒºåº”æ€¥åŠ</div>
                        <div class="phone">ğŸ“ 68692821</div>
                    </div>
                </div>
            </div>
            
            <div class="search-section">
                <div class="search-controls">
                    <input type="text" id="searchInput" placeholder="æœç´¢å§“åã€éƒ¨é—¨æˆ–ç”µè¯å·ç ..." onkeyup="filterContacts()">
                    <select id="departmentFilter" onchange="filterContacts()">
                        <option value="">æ‰€æœ‰éƒ¨é—¨</option>
                    </select>
                </div>
                <div class="stats">
                    <div class="stat-item">
                        <span class="label">æ€»äººæ•°ï¼š</span>
                        <span class="value" id="totalCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="label">ç­›é€‰ç»“æœï¼š</span>
                        <span class="value" id="filteredCount">0</span>
                    </div>
                </div>
            </div>
            
            <div class="contacts-section">
                <div class="contact-grid" id="contactGrid">
                    <!-- è”ç³»äººå¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <!-- æ–°å¢/ç¼–è¾‘è”ç³»äººæ¨¡æ€æ¡† -->
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">æ–°å¢è”ç³»äºº</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <form id="contactForm">
                <div class="form-group">
                    <label for="contactName">å§“å *</label>
                    <input type="text" id="contactName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="contactDepartment">éƒ¨é—¨ *</label>
                    <select id="contactDepartment" name="department" required>
                        <option value="">è¯·é€‰æ‹©éƒ¨é—¨</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="contactMobile">æ‰‹æœºå·ç </label>
                    <input type="tel" id="contactMobile" name="mobile" pattern="[0-9]{11}">
                </div>
                <div class="form-group">
                    <label for="contactOfficePhone">åŠå…¬ç”µè¯</label>
                    <input type="tel" id="contactOfficePhone" name="officePhone">
                </div>
                <div class="form-group">
                    <label for="contactHomePhone">å®¶åº­ç”µè¯</label>
                    <input type="tel" id="contactHomePhone" name="homePhone">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal()">å–æ¶ˆ</button>
                    <button type="submit" class="btn-primary" id="submitBtn">ä¿å­˜</button>
                </div>
            </form>
        </div>
    </div>

    <!-- æ•°æ®ç®¡ç†æ¨¡æ€æ¡† -->
    <div id="dataManagementModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">æ•°æ®ç®¡ç†</h3>
                <button class="close-btn" onclick="closeDataManagement()">&times;</button>
            </div>
            <div style="margin: 20px 0;">
                <div class="form-group">
                    <label>å½“å‰çŠ¶æ€</label>
                    <div style="padding: 10px; background: #f8f9fa; border-radius: 5px; margin-bottom: 15px;">
                        <div>ğŸ“Š æ€»è”ç³»äººæ•°ï¼š<strong id="dataManageCount">0</strong></div>
                        <div>ğŸ’¾ æ•°æ®å·²è‡ªåŠ¨ä¿å­˜åˆ°æµè§ˆå™¨æœ¬åœ°å­˜å‚¨</div>
                        <div>â° æœ€åæ›´æ–°ï¼š<span id="lastUpdateTime">æœªçŸ¥</span></div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>æ•°æ®æ“ä½œ</label>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button type="button" class="btn-secondary" onclick="exportData()">ğŸ“¥ å¯¼å‡ºæ•°æ®</button>
                        <button type="button" class="btn-secondary btn-danger" onclick="clearLocalStorage()">ğŸ—‘ï¸ æ¸…é™¤æœ¬åœ°æ•°æ®</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>è¯´æ˜</label>
                    <div style="font-size: 0.9em; color: #666; line-height: 1.5;">
                        â€¢ æ‰€æœ‰ä¿®æ”¹ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æµè§ˆå™¨æœ¬åœ°å­˜å‚¨<br>
                        â€¢ æ•°æ®ä»…åœ¨å½“å‰æµè§ˆå™¨ä¸­æœ‰æ•ˆ<br>
                        â€¢ å»ºè®®å®šæœŸå¯¼å‡ºæ•°æ®è¿›è¡Œå¤‡ä»½<br>
                        â€¢ æ¸…é™¤æµè§ˆå™¨æ•°æ®ä¼šä¸¢å¤±æ‰€æœ‰ä¿®æ”¹
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-primary" onclick="closeDataManagement()">å…³é—­</button>
            </div>
        </div>
    </div>
    
    <script>
        // å¯†ç éªŒè¯åŠŸèƒ½
        const correctPassword = '159357';
        
        // æœ¬åœ°å­˜å‚¨é”®å
        const STORAGE_KEY = 'lwz_contacts_data';
        const VERSION_KEY = 'lwz_data_version';
        const CURRENT_VERSION = '1.0';
        
        function checkPassword() {
            const password = document.getElementById('passwordInput').value;
            
            if (password === correctPassword) {
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('mainContent').style.display = 'block';
                document.getElementById('errorMsg').style.display = 'none';
                initializeContacts();
            } else {
                document.getElementById('errorMsg').style.display = 'block';
                document.getElementById('passwordInput').value = '';
                document.getElementById('passwordInput').focus();
            }
        }
        
        function logout() {
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('loginContainer').style.display = 'flex';
            document.getElementById('passwordInput').value = '';
            document.getElementById('errorMsg').style.display = 'none';
        }
        
        // å›è½¦é”®ç™»å½•
        document.getElementById('passwordInput').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                checkPassword();
            }
        });
        
        // é»˜è®¤çš„é€šè®¯å½•æ•°æ®
        const defaultContactsData = `1,å…šæ”¿,é‡‘æ™¶,,,13820868619
2,å…šæ”¿,å°šç”¨é©,,,13312070700
3,å…šæ”¿,åˆ˜æ­£æ–‡,,,15620565556
4,å…šæ”¿,æ—é›·,,,18102116868
5,å…šæ”¿,é©¬å›é™,,,13820025188
6,å…šæ”¿,èµµå…ƒå¤,,,13602041495
7,å…šæ”¿,å¼ é›¯æ™¶,,,15822730000
8,å…šæ”¿,å¾ç¦é¹,,,18622036918
9,å…šæ”¿,é©¬ç‡•ä¸½,,,13672035881
10,å…šæ”¿,é­æ™ºè¶…,,,13512477666
11,å…šæ”¿,åˆ˜è‰³,,,15620875826
12,å…šæ”¿,å§šè‰¯ç”°,,,15510997472
13,å…šæ”¿,å¼ å®å¾·,,,13752177538
14,å…šæ”¿,åˆ˜å­é‘«,,,18522720493
15,å…šæ”¿,å¼ å»ºäº­,,,15510913720
16,å…šæ”¿,ä¾¯ç‰åµ©,,,15854333267
17,å…šå§”åŠ(äººå¤§åŠ),å­Ÿé“­è¾‰,68120063,,18622699053
18,å…šå§”åŠ(äººå¤§åŠ),æ¨Šè“‰,68120063,,17627684548
19,å…šå§”åŠ(äººå¤§åŠ),éƒ‘å‡¯,68120063,,17866829580
20,å…šå§”åŠ(äººå¤§åŠ),ç‹ä¹”,68120063,,15602189093
21,å…šå§”åŠ(äººå¤§åŠ),ç‹å¿ƒæ€¡,68120063,,13114951612
22,å…šå§”åŠ(äººå¤§åŠ),è£è“‰,68120063,,17622571603
23,å…šå§”åŠ(äººå¤§åŠ),æ²™ç³ç³,68120063,,19922636889
24,å…šå§”åŠ(äººå¤§åŠ),åˆ˜æ™”,68120063,,15922000527
25,å…šå§”åŠ(äººå¤§åŠ),ç‹å…‹,,,13920473979
26,æ”¿åºœåŠ,å§šé ”,68120168,,15620371493
27,æ”¿åºœåŠ,é‚“æ³¢,68120168,,18920971591
28,æ”¿åºœåŠ,é™ˆå®‡æ¸…,68120168,,17726071230
29,æ”¿åºœåŠ,é»å¿—ä¼š,68120168,,13821821523
30,çºªæ£€å®¤,ç‹å½¬,68123106,,13662162166
31,çºªæ£€å®¤,å­”ä»¤æŒ¯,68123106,,15522648761
32,å·¥ä¼šå¦‡è”,éƒæµ·åªš,68123109,,18810565483
33,å·¥ä¼šå¦‡è”,è´¾ç¡•,68123109,,15822312299
34,å†œä¸šåŠ,éƒ­å¤§æ˜Ÿ,68120068,,15522190533
35,å†œä¸šåŠ,äºä¿Šç”Ÿ,68120068,,13132273512
36,å†œä¸šåŠ,é»„æ€èŒ,68120068,,13212056669
37,å†œä¸šåŠ,æ¨æŒ¯å¼º,68120068,,15922075300
38,å†œä¸šåŠ,å•†ç¦ä¸½,68120068,,18502266961
39,å†œä¸šåŠ,åˆ˜å¸…,68120068,,18698065373
40,å†œä¸šåŠ,å­™ç­–,68120068,,18920769595
41,å†œä¸šåŠ,ææ©æ¥,68120068,,13820820799
42,å†œä¸šåŠ,æ—å¹¿è‰³,68120068,,15302029861
43,å†œä¸šåŠ,å­™æ˜Œå¹³,68120068,,18222909243
44,å†œä¸šåŠ,å¼ å¼º,68120068,,13502088856
45,å·¥ä¸šåŠ,æœé›¨é¾™,68120071,,13820888863
46,å·¥ä¸šåŠ,éƒ­ä¿Šç²,68120071,,13820058698
47,å·¥ä¸šåŠ,äºæ´ªæ˜¥,68120071,,13702079811
48,å·¥ä¸šåŠ,æœæ•ˆå†›,68120071,,13920016465
49,å·¥ä¸šåŠ,äºé¡ºå°§,68120071,,15022744833
50,å·¥ä¸šåŠ,æ›¹å½¤å½¤,68120071,,13512820088
51,å·¥ä¸šåŠ,æœæ©ç¦¹,68120071,,17526536004
52,å¸æ³•æ‰€,é«˜æ°¸ä¹‰,68120079,,15902288868
53,å¸æ³•æ‰€,èµµå¨Ÿ,68120079,,13672028571
54,å¸æ³•æ‰€,åˆ˜ç³,68120079,,18522506497
55,å®‰ç›‘,èµµç£Š,68123108,,18622852119
56,å®‰ç›‘,å¼ é¹¤é¦¨,68123108,,18602630455
57,å®‰ç›‘,åˆ˜é˜³,68123108,,18302275555
58,å®‰ç›‘,å¼ æ¶›,68123108,,15510883180
59,å®‰ç›‘,æ»‘æ¡‚æ˜¥,68123108,,18920591566
60,å®‰ç›‘,æ¨å¥,68123108,,13022280995
61,å«å¥åŠ,éƒæ ‘äº‘,68120369,,15002263296
62,å«å¥åŠ,å®‰ç§€è‹±,68120369,,13132043877
63,å«å¥åŠ,æ—æ°¸äº®,68120084,,13821169309
64,å«å¥åŠ,ç”°é™,68120084,,13323393635
65,å«å¥åŠ,å‘¨ä½œç‡•,68120084,,13516260311
66,å«å¥åŠ,éƒç»´,68120084,,13672157681
67,æ­¦è£…éƒ¨,æ¨æ•¬ç£Š,,,15822211208
68,ç»¼æ²»åŠä¿¡è®¿åŠ,ç¿Ÿç‚³æµ©,68128992,,18822620909
69,ç»¼æ²»åŠä¿¡è®¿åŠ,è‘›å­¦å‡¯,68128992,,13302109995
70,ç»¼æ²»åŠä¿¡è®¿åŠ,å½­å›½æ”¿,68128992,ç—…å‡,13682003180
71,ç»¼æ²»åŠä¿¡è®¿åŠ,æœ±æ…§æ•,68128992,,13526102969
72,ç»¼æ²»åŠä¿¡è®¿åŠ,å¢å»ºæ—»,68128992,,15222788369
73,ç»¼æ²»åŠä¿¡è®¿åŠ,å®‹å‹ç¥¥,68128992,,13132115305
74,ä¹¡æ–‡æ•™,å¼ è‹±æˆ,68120044,,13207688889
75,ä¹¡æ–‡æ•™,äºæ…§æ•,68120044,,13920560996
76,ç»Ÿè®¡åŠ,éƒ­å·çª,68123096,,15122407868
77,ç»Ÿè®¡åŠ,ç‹é’°,68123096,,15122055520
78,ç»Ÿè®¡åŠ,æœè¿éœ,68123096,,13642169402
79,ç»Ÿè®¡åŠ,æœé”,68123096,,18526034253
80,åŸå»ºåŠ,åˆ˜ç”Ÿä¼š,68123156,,13207653623
81,åŸå»ºåŠ,ç‹è•Š,68123156,,15733298634
82,åŸå»ºåŠ,æ¨å¸…,68123156,,15222225272
83,åŸå»ºåŠ,æ½˜ç¦ç¦,68123156,,18722062480
84,ç¯å«åŠï¼ˆæˆ·å•åŠï¼‰,é²å¿—å¼º,68121399,,13752738032
85,ç¯å«åŠï¼ˆæˆ·å•åŠï¼‰,å¼ å¿ å»º,68121399,,13662052266
86,ç¯å«åŠï¼ˆæˆ·å•åŠï¼‰,éŸ©ç´ å‹‡,68121399,,13502192191
87,ç¯å«åŠï¼ˆæˆ·å•åŠï¼‰,ææ´¥æ´¥,68121399,,13002249856
88,åŠ³åŠ¨ä¿éšœ,åˆ˜åˆš,68120333,,15620975178
89,åŠ³åŠ¨ä¿éšœ,é™ˆå½¦å›,68120333,,15022393432
90,åŠ³åŠ¨ä¿éšœ,èµµèƒœ,68120333,,18502255881
91,åŠ³åŠ¨ä¿éšœ,äº•è,68120333,,18512240576
92,é€€å½¹å†›äººæœåŠ¡ç«™,ç‹ç…œé¢–,68132212,,15122944081
93,é€€å½¹å†›äººæœåŠ¡ç«™,åˆ˜æ¡,68132212,,16600208000
94,æœåŠ¡å¤§å…,å¼ å¿—å‘,68122915,,18920271365
95,è´¢æ”¿æ‰€,æœ±å»ºæ–°,68120081,,13512226667
96,è´¢æ”¿æ‰€,ç‹é›ªå¦,68120081,,15022336693
97,è´¢æ”¿æ‰€,æ½˜ç»è£,68120081,,13102295093
98,è´¢æ”¿æ‰€,è€³è´µç‘,68120081,,15922207913
99,æ°‘æ”¿åŠ,èƒ¡è‰³å,68120078,,18602629788
100,æ°‘æ”¿åŠ,èµµä¸¹,68120078,,13920339342
101,æ°‘æ”¿åŠ,ææ¬£,68120078,,15822322738
102,æ°‘æ”¿åŠ,äºçŠ,68120078,,15522312135
103,æ°‘æ”¿åŠ,å¼ é—°æ™º,68120078,,17301616592
104,æ‘å¸ä¹¡ç®¡,æå¾·ç²,68120456,,13920361122
105,æ‘å¸ä¹¡ç®¡,ææ¶¦æ˜¥,68120456,,18602631890
106,æ‘å¸ä¹¡ç®¡,ææ´ªè‰³,68120456,,15620929970
107,æ²³é•¿åŠ,å¼ æ©å…´,,,18630896160
108,æ‰§æ³•å¤§é˜Ÿ,æœ±å†›ç¦¾,68123098,,15822990028
109,æ‰§æ³•å¤§é˜Ÿ,å®‹é‡‘èƒœ,68123098,,15822990033
110,æ‰§æ³•å¤§é˜Ÿ,é¡¹æ˜†,68123098,,18630808606
111,æ‰§æ³•å¤§é˜Ÿ,æ¢å»ºå¿ ,68123098,,15122547160
112,æ‰§æ³•å¤§é˜Ÿ,åˆ˜é›·,68123098,,18602680361
113,æ‰§æ³•å¤§é˜Ÿ,æ¨æ©ç¥¥,68123098,,13820504831
114,æ‰§æ³•å¤§é˜Ÿ,æ¨é¹,68123098,,15900232223
115,æ‰§æ³•å¤§é˜Ÿ,é«˜æ˜ä¼š,68123098,,15222025492
116,å¸æœº,å¼ æ°¸è·¯,,,13388019299
117,å¸æœº,æ¢é‡‘å›½,,,13821649187
118,é—¨å«1,å¼ æ–‡æ­¦,68122916,,13920907833
119,é—¨å«1,é—«ç¦æ±Ÿ,68122916,,15922075303
120,é—¨å«2,æ¨æ©ç¥¥,68122698,,13820504831
121,é—¨å«2,éƒè¿å¿ ,68122698,68120989,13516108611
122,æ´¾å‡ºæ‰€,å¼ é›¯æ™¶,68120110,,15822730000
123,ç¨åŠ¡æ‰€,é™ˆç›¸,68815027,,13110063666
124,æ°´ç«™,åˆ˜ä¼Ÿ,,,13110015200
125,å¸‚åœºç›‘ç®¡æ‰€,è‘£é‡‘é”‹,68123791,,13752568158
126,é‚®å±€,å…°é¢–,68120405,,15692272230
127,å«ç”Ÿé™¢,ç‹å®è‰¯,68120042,,13212069756
128,å†œå•†è¡Œ,é—«éš½,,,15802299095
129,ç”µä¸šæ‰€,å¼ æ¾œ,68602096,,18920300189
130,ç”µè¯ç«™,å¼ è¾¾,68120999,68120159,18602205375
131,ç”µç®¡ç«™,é©¬è·ƒæ´²,,,13820048444`;

        let contacts = [];
        let departments = new Set();
        let editingContactId = null;
        let nextId = 132; // ä¸‹ä¸€ä¸ªå¯ç”¨ID

        // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
        function saveContactsToStorage() {
            try {
                const dataToSave = {
                    version: CURRENT_VERSION,
                    contacts: contacts,
                    nextId: nextId,
                    timestamp: new Date().toISOString()
                };
                localStorage.setItem(STORAGE_KEY, JSON.stringify(dataToSave));
                console.log('æ•°æ®å·²ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨');
            } catch (error) {
                console.error('ä¿å­˜æ•°æ®å¤±è´¥:', error);
                alert('ä¿å­˜æ•°æ®å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨å­˜å‚¨ç©ºé—´');
            }
        }

        // ä»æœ¬åœ°å­˜å‚¨è¯»å–æ•°æ®
        function loadContactsFromStorage() {
            try {
                const savedData = localStorage.getItem(STORAGE_KEY);
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    
                    // æ£€æŸ¥æ•°æ®ç‰ˆæœ¬å…¼å®¹æ€§
                    if (parsedData.version === CURRENT_VERSION && parsedData.contacts) {
                        contacts = parsedData.contacts;
                        nextId = parsedData.nextId || getMaxId() + 1;
                        console.log(`å·²ä»æœ¬åœ°å­˜å‚¨åŠ è½½ ${contacts.length} æ¡è”ç³»äººæ•°æ®`);
                        return true;
                    } else {
                        console.log('æœ¬åœ°å­˜å‚¨æ•°æ®ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®');
                    }
                }
            } catch (error) {
                console.error('è¯»å–æœ¬åœ°æ•°æ®å¤±è´¥:', error);
            }
            
            // å¦‚æœæ²¡æœ‰æœ¬åœ°æ•°æ®æˆ–è¯»å–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®
            parseContactsData();
            return false;
        }

        // è·å–å½“å‰æœ€å¤§ID
        function getMaxId() {
            return contacts.length > 0 ? Math.max(...contacts.map(c => c.id)) : 0;
        }

        // æ¸…é™¤æœ¬åœ°å­˜å‚¨æ•°æ®
        function clearLocalStorage() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æœ¬åœ°å­˜å‚¨çš„æ•°æ®å—ï¼Ÿè¿™å°†æ¢å¤åˆ°åˆå§‹çŠ¶æ€ï¼Œæ‰€æœ‰ä¿®æ”¹éƒ½å°†ä¸¢å¤±ï¼')) {
                localStorage.removeItem(STORAGE_KEY);
                localStorage.removeItem(VERSION_KEY);
                
                // é‡æ–°åŠ è½½é»˜è®¤æ•°æ®
                parseContactsData();
                initializeDepartmentSelects();
                updateStats();
                displayContacts(contacts);
                
                showSuccessMessage('æœ¬åœ°æ•°æ®å·²æ¸…é™¤ï¼Œå·²æ¢å¤åˆ°åˆå§‹çŠ¶æ€');
            }
        }

        // å¯¼å‡ºæ•°æ®ä¸ºJSONæ–‡ä»¶
        function exportData() {
            const dataToExport = {
                version: CURRENT_VERSION,
                contacts: contacts,
                exportTime: new Date().toISOString(),
                totalContacts: contacts.length
            };
            
            const dataStr = JSON.stringify(dataToExport, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `é€šè®¯å½•æ•°æ®_${new Date().toISOString().slice(0,10)}.json`;
            link.click();
            
            showSuccessMessage('æ•°æ®å¯¼å‡ºæˆåŠŸ');
        }
        
        function initializeContacts() {
            // é¦–å…ˆå°è¯•ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
            const hasLocalData = loadContactsFromStorage();
            
            if (!hasLocalData) {
                console.log('ä½¿ç”¨é»˜è®¤æ•°æ®');
            }
            
            // é‡æ–°æ„å»ºéƒ¨é—¨åˆ—è¡¨
            departments.clear();
            contacts.forEach(contact => {
                departments.add(contact.department);
            });
            
            initializeDepartmentSelects();
            updateStats();
            displayContacts(contacts);
            
            // æ˜¾ç¤ºæ•°æ®æ¥æºæç¤º
            if (hasLocalData) {
                showSuccessMessage('å·²åŠ è½½æœ¬åœ°ä¿å­˜çš„æ•°æ®');
            }
        }

        function parseContactsData() {
            contacts = [];
            departments.clear();
            
            defaultContactsData.split('\n').forEach(line => {
                const parts = line.trim().split(',');
                if (parts.length >= 6) {
                    const contact = {
                        id: parseInt(parts[0]),
                        department: parts[1].trim(),
                        name: parts[2].trim(),
                        officePhone: parts[3].trim(),
                        homePhone: parts[4].trim(),
                        mobile: parts[5].trim()
                    };
                    contacts.push(contact);
                    departments.add(contact.department);
                    if (contact.id >= nextId) {
                        nextId = contact.id + 1;
                    }
                }
            });
        }

        function initializeDepartmentSelects() {
            // åˆå§‹åŒ–æœç´¢éƒ¨é—¨ä¸‹æ‹‰æ¡†
            const departmentFilter = document.getElementById('departmentFilter');
            departmentFilter.innerHTML = '<option value="">æ‰€æœ‰éƒ¨é—¨</option>';
            Array.from(departments).sort().forEach(dept => {
                const option = document.createElement('option');
                option.value = dept;
                option.textContent = dept;
                departmentFilter.appendChild(option);
            });

            // åˆå§‹åŒ–è¡¨å•éƒ¨é—¨ä¸‹æ‹‰æ¡†
            const contactDepartment = document.getElementById('contactDepartment');
            contactDepartment.innerHTML = '<option value="">è¯·é€‰æ‹©éƒ¨é—¨</option>';
            Array.from(departments).sort().forEach(dept => {
                const option = document.createElement('option');
                option.value = dept;
                option.textContent = dept;
                contactDepartment.appendChild(option);
            });
        }

        function updateStats() {
            document.getElementById('totalCount').textContent = contacts.length;
        }
        
        // åˆ›å»ºè”ç³»äººå¡ç‰‡
        function createContactCard(contact) {
            const card = document.createElement('div');
            card.className = 'contact-card';
            
            let html = `
                <div class="contact-actions">
                    <button class="btn-edit" onclick="editContact(${contact.id})" title="ç¼–è¾‘">âœï¸</button>
                    <button class="btn-delete" onclick="deleteContact(${contact.id})" title="åˆ é™¤">ğŸ—‘ï¸</button>
                </div>
                <div class="name">${contact.name}</div>
                <div class="department">${contact.department}</div>
            `;
            
            if (contact.mobile) {
                html += `<div class="info-item"><span class="icon">ğŸ“±</span>${contact.mobile}</div>`;
            }
            
            if (contact.officePhone) {
                html += `<div class="info-item"><span class="icon">â˜ï¸</span>${contact.officePhone}</div>`;
            }
            
            if (contact.homePhone && contact.homePhone !== 'ç—…å‡') {
                html += `<div class="info-item"><span class="icon">ğŸ </span>${contact.homePhone}</div>`;
            }
            
            card.innerHTML = html;
            return card;
        }
        
        // æ˜¾ç¤ºæ‰€æœ‰è”ç³»äºº
        function displayContacts(contactList) {
            const grid = document.getElementById('contactGrid');
            grid.innerHTML = '';
            
            if (contactList.length === 0) {
                grid.innerHTML = '<div class="no-results">æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„è”ç³»äºº</div>';
                return;
            }
            
            contactList.forEach(contact => {
                grid.appendChild(createContactCard(contact));
            });
            
            document.getElementById('filteredCount').textContent = contactList.length;
        }
        
        // ç­›é€‰è”ç³»äºº
        function filterContacts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const selectedDept = document.getElementById('departmentFilter').value;
            
            const filtered = contacts.filter(contact => {
                const matchSearch = !searchTerm || 
                    contact.name.toLowerCase().includes(searchTerm) ||
                    contact.department.toLowerCase().includes(searchTerm) ||
                    (contact.mobile && contact.mobile.includes(searchTerm)) ||
                    (contact.officePhone && contact.officePhone.includes(searchTerm)) ||
                    (contact.homePhone && contact.homePhone.includes(searchTerm));
                
                const matchDept = !selectedDept || contact.department === selectedDept;
                
                return matchSearch && matchDept;
            });
            
            displayContacts(filtered);
        }

        // æ˜¾ç¤ºæ–°å¢è”ç³»äººæ¨¡æ€æ¡†
        function showAddModal() {
            editingContactId = null;
            document.getElementById('modalTitle').textContent = 'æ–°å¢è”ç³»äºº';
            document.getElementById('submitBtn').textContent = 'ä¿å­˜';
            document.getElementById('contactForm').reset();
            document.getElementById('contactModal').style.display = 'block';
        }

        // æ˜¾ç¤ºç¼–è¾‘è”ç³»äººæ¨¡æ€æ¡†
        function editContact(contactId) {
            const contact = contacts.find(c => c.id === contactId);
            if (!contact) return;

            editingContactId = contactId;
            document.getElementById('modalTitle').textContent = 'ç¼–è¾‘è”ç³»äºº';
            document.getElementById('submitBtn').textContent = 'æ›´æ–°';
            
            // å¡«å……è¡¨å•
            document.getElementById('contactName').value = contact.name;
            document.getElementById('contactDepartment').value = contact.department;
            document.getElementById('contactMobile').value = contact.mobile || '';
            document.getElementById('contactOfficePhone').value = contact.officePhone || '';
            document.getElementById('contactHomePhone').value = contact.homePhone || '';
            
            document.getElementById('contactModal').style.display = 'block';
        }

        // åˆ é™¤è”ç³»äºº
        function deleteContact(contactId) {
            const contact = contacts.find(c => c.id === contactId);
            if (!contact) return;

            if (confirm(`ç¡®å®šè¦åˆ é™¤è”ç³»äºº"${contact.name}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚`)) {
                contacts = contacts.filter(c => c.id !== contactId);
                
                // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                saveContactsToStorage();
                
                departments.clear();
                contacts.forEach(c => departments.add(c.department));
                initializeDepartmentSelects();
                
                updateStats();
                filterContacts();
                
                showSuccessMessage(`è”ç³»äºº"${contact.name}"å·²æˆåŠŸåˆ é™¤å¹¶ä¿å­˜`);
            }
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            document.getElementById('contactModal').style.display = 'none';
            document.getElementById('contactForm').reset();
            editingContactId = null;
        }

        // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
        function showSuccessMessage(message) {
            const msgElement = document.getElementById('successMessage');
            msgElement.textContent = message;
            msgElement.style.display = 'block';
            
            setTimeout(() => {
                msgElement.style.display = 'none';
            }, 3000);
        }

        // æ˜¾ç¤ºæ•°æ®ç®¡ç†æ¨¡æ€æ¡†
        function showDataManagement() {
            document.getElementById('dataManageCount').textContent = contacts.length;
            
            // è·å–æœ€åæ›´æ–°æ—¶é—´
            try {
                const savedData = localStorage.getItem(STORAGE_KEY);
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    const updateTime = new Date(parsedData.timestamp).toLocaleString('zh-CN');
                    document.getElementById('lastUpdateTime').textContent = updateTime;
                } else {
                    document.getElementById('lastUpdateTime').textContent = 'æ— æœ¬åœ°æ•°æ®';
                }
            } catch (error) {
                document.getElementById('lastUpdateTime').textContent = 'è·å–å¤±è´¥';
            }
            
            document.getElementById('dataManagementModal').style.display = 'block';
        }

        // å…³é—­æ•°æ®ç®¡ç†æ¨¡æ€æ¡†
        function closeDataManagement() {
            document.getElementById('dataManagementModal').style.display = 'none';
        }

        // å¤„ç†è¡¨å•æäº¤
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const contactData = {
                name: formData.get('name').trim(),
                department: formData.get('department'),
                mobile: formData.get('mobile').trim(),
                officePhone: formData.get('officePhone').trim(),
                homePhone: formData.get('homePhone').trim()
            };

            // éªŒè¯å¿…å¡«å­—æ®µ
            if (!contactData.name || !contactData.department) {
                alert('è¯·å¡«å†™å§“åå’Œéƒ¨é—¨ï¼');
                return;
            }

            // éªŒè¯æ‰‹æœºå·æ ¼å¼
            if (contactData.mobile && !/^1[3-9]\d{9}$/.test(contactData.mobile)) {
                alert('è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ï¼');
                return;
            }

            if (editingContactId) {
                // æ›´æ–°ç°æœ‰è”ç³»äºº
                const contactIndex = contacts.findIndex(c => c.id === editingContactId);
                if (contactIndex !== -1) {
                    contacts[contactIndex] = {
                        ...contacts[contactIndex],
                        ...contactData
                    };
                    showSuccessMessage(`è”ç³»äºº"${contactData.name}"å·²æˆåŠŸæ›´æ–°å¹¶ä¿å­˜`);
                }
            } else {
                // æ–°å¢è”ç³»äºº
                const newContact = {
                    id: nextId++,
                    ...contactData
                };
                contacts.push(newContact);
                showSuccessMessage(`è”ç³»äºº"${contactData.name}"å·²æˆåŠŸæ·»åŠ å¹¶ä¿å­˜`);
            }

            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            saveContactsToStorage();
            
            // æ›´æ–°æ•°æ®
            departments.add(contactData.department);
            initializeDepartmentSelects();
            updateStats();
            filterContacts();
            closeModal();
        });

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.addEventListener('click', function(event) {
            const contactModal = document.getElementById('contactModal');
            const dataModal = document.getElementById('dataManagementModal');
            if (event.target === contactModal) {
                closeModal();
            } else if (event.target === dataModal) {
                closeDataManagement();
            }
        });

        // ESCé”®å…³é—­æ¨¡æ€æ¡†
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
                closeDataManagement();
            }
        });
    </script>
</body>
</html>
